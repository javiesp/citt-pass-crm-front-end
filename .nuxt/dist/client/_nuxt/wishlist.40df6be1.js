import{g as U,d as Q}from"./wishlistApi.8f919075.js";import{_ as q,a as o,e as w,b as e,w as t,g as u,F as y,o as _,c as D,f as V,h as a,t as k,l as F,v as j}from"./entry.12f9e6e0.js";import"./axios.4d564c32.js";const M={name:"wishlistItem",data(){return{dialogDelete:!1,dialog:!1,wishlistArray:[],inventoryNames:["Inventario Alpha","Inventario Beta","Inventario Gamma"],selectedInventory:null,showDetails:{},wishlistId:null,loading:!1,productSearchQuery:"",wishNames:[]}},computed:{filteredProducts(){return console.log("INPUT: ",this.productSearchQuery),this.productSearchQuery?this.wishlistArray.map(l=>({...l,products:l.products.filter(n=>n.name.toLowerCase().includes(this.productSearchQuery.toLowerCase()))})).filter(l=>l.products.length>0):(console.log("OUTPUT: ",this.wishlistArray),this.wishlistArray)}},methods:{async fetchWishlists(){try{this.loading=!0,console.log("cargando",this.loading);const l=await U();this.wishlistArray=l.data,this.wishlistNameToIdMap=this.wishlistArray.reduce((n,p)=>(n[p.wishlist_name]=p.wishlist_id,n),{}),this.wishNames=this.wishlistArray.map(n=>n.wishlist_name),this.loading=!1,console.log("descargando",this.loading)}catch(l){console.error("Error fetching wishlists:",l),this.loading=!1}},openDelete(l){console.log("ITEM"),console.log(l),this.wishlistId=l,this.dialogDelete=!0},async deleteWishlist(){try{const l=Q(this.wishlistId);console.log("DELETED",this.wishlistId),console.log(l),this.dialogDelete=!1,this.fetchWishlists()}catch(l){console.log(l)}},selectInventoryId(){console.log("Selected Inventory:",this.selectedInventory)},downloadPdf(){console.log("Download PDF")},toggleDetails(l){this.showDetails[l]=!this.showDetails[l]}},mounted(){this.fetchWishlists()}},R=u("h2",null,"Lista de deseos",-1),z=u("br",null,null,-1),G=u("span",null,"Confirmar Eliminación",-1),O={class:"pa-4 text-center"};function H(l,n,p,J,i,m){const E=o("v-progress-circular"),c=o("v-col"),N=o("v-img"),x=o("v-card-title"),W=o("v-card-subtitle"),r=o("v-btn"),C=o("v-spacer"),v=o("v-card-actions"),I=o("v-divider"),P=o("v-list-item-content"),b=o("v-icon"),T=o("v-avatar"),L=o("v-list-item"),g=o("v-card-text"),B=o("v-expand-transition"),f=o("v-card"),A=o("v-row"),S=o("v-dialog"),h=o("v-text-field");return _(),w(y,null,[R,z,e(A,null,{default:t(()=>[i.loading?(_(),D(c,{key:0,cols:"12",class:"text-center"},{default:t(()=>[e(E,{size:200,width:17,color:"primary",indeterminate:""})]),_:1})):(_(!0),w(y,{key:1},V(i.wishlistArray,(s,K)=>(_(),D(c,{cols:"3",key:s._id},{default:t(()=>[e(f,{class:"mx-auto","max-width":"344"},{default:t(()=>[e(N,{height:"200px",src:"https://cdn.vuetifyjs.com/images/cards/sunshine.jpg",cover:""}),e(x,null,{default:t(()=>[a(k(s.wishlist_name),1)]),_:2},1024),e(W,null,{default:t(()=>[a("Presupuesto: "+k(s.budget),1)]),_:2},1024),e(v,null,{default:t(()=>[e(r,{color:"orange-lighten-2",onClick:d=>m.toggleDetails(s._id)},{default:t(()=>[a("Ver Productos")]),_:2},1032,["onClick"]),e(C),e(r,{icon:i.showDetails[s._id]?"mdi-chevron-up":"mdi-chevron-down",onClick:d=>m.toggleDetails(s._id)},null,8,["icon","onClick"])]),_:2},1024),e(B,null,{default:t(()=>[F(u("div",null,[e(I),e(g,null,{default:t(()=>[(_(!0),w(y,null,V(s.product,d=>(_(),D(L,{key:d._id,subtitle:d.price,title:d.product_name},{prepend:t(()=>[e(T,{color:"grey-lighten-1"},{default:t(()=>[e(b,{color:"white"},{default:t(()=>[a("mdi-shopping")]),_:1})]),_:1})]),append:t(()=>[e(r,{color:"grey-lighten-1",icon:"mdi-trash-can-outline",variant:"text",click:"dialogDelete = true"})]),default:t(()=>[e(P,null,{default:t(()=>[a("Cantidad: "+k(d.quantity),1)]),_:2},1024)]),_:2},1032,["subtitle","title"]))),128))]),_:2},1024)],512),[[j,i.showDetails[s._id]]])]),_:2},1024),e(c,null,{default:t(()=>[e(r,{onClick:d=>m.openDelete(s._id),color:"red",density:"compact"},{default:t(()=>[e(b,null,{default:t(()=>[a("mdi-trash-can-outline")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(S,{modelValue:i.dialogDelete,"onUpdate:modelValue":n[1]||(n[1]=s=>i.dialogDelete=s),persistent:"","max-width":"500px"},{default:t(()=>[e(f,null,{default:t(()=>[e(x,null,{default:t(()=>[G]),_:1}),e(g,null,{default:t(()=>[a(" ¿Estás seguro de que deseas eliminar esto? ")]),_:1}),e(v,null,{default:t(()=>[e(r,{onClick:n[0]||(n[0]=s=>i.dialogDelete=!1)},{default:t(()=>[a("Cancelar")]),_:1}),e(r,{color:"red",onClick:m.deleteWishlist},{default:t(()=>[a("Eliminar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),u("div",O,[e(S,{modelValue:i.dialog,"onUpdate:modelValue":n[4]||(n[4]=s=>i.dialog=s),"max-width":"600"},{default:t(()=>[e(f,{"prepend-icon":"mdi-folder-outline",title:"Agregar Wish-List"},{default:t(()=>[e(g,null,{default:t(()=>[e(A,{dense:""},{default:t(()=>[e(c,{cols:"12",md:"4",sm:"6"},{default:t(()=>[e(h,{label:"Item",required:""})]),_:1}),e(c,{cols:"12",md:"4",sm:"6"},{default:t(()=>[e(h,{hint:"Rack",label:"Rack"})]),_:1}),e(c,{cols:"12",md:"4",sm:"6"},{default:t(()=>[e(h,{hint:"Stock",label:"Stock"})]),_:1}),e(c,{cols:"12",md:"4",sm:"6"},{default:t(()=>[e(h,{hint:"ID",label:"ID"})]),_:1})]),_:1})]),_:1}),e(I),e(v,null,{default:t(()=>[e(C),e(r,{text:"Close",variant:"plain",onClick:n[2]||(n[2]=s=>i.dialog=!1)}),e(r,{color:"primary",text:"Save",variant:"tonal",onClick:n[3]||(n[3]=s=>i.dialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64)}const $=q(M,[["render",H]]);export{$ as default};
