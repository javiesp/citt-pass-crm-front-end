import{_ as U,u as Q,a as n,e as y,b as e,w as t,g as _,F as w,o as u,c as k,f as T,h as a,t as D,m as q,v as F}from"./entry.5d6c19b6.js";import{g as R,d as j}from"./wishlistApi.262a6be6.js";import"./axios.4d564c32.js";const M={name:"wishlistItem",data(){return{dialogDelete:!1,dialog:!1,wishlistArray:[],inventoryNames:["Inventario Alpha","Inventario Beta","Inventario Gamma"],selectedInventory:null,showDetails:{},wishlistId:null,loading:!1,productSearchQuery:"",wishNames:[]}},computed:{filteredProducts(){return console.log("INPUT: ",this.productSearchQuery),this.productSearchQuery?this.wishlistArray.map(l=>({...l,products:l.products.filter(o=>o.name.toLowerCase().includes(this.productSearchQuery.toLowerCase()))})).filter(l=>l.products.length>0):(console.log("OUTPUT: ",this.wishlistArray),this.wishlistArray)}},methods:{verifyTokenAuth(l){const o=Q();l||o.push("/login"),typeof l=="string"&&l.split(".").length!==3&&o.push("/login")},async fetchWishlists(){try{this.loading=!0,console.log("cargando",this.loading);const l=await R();this.wishlistArray=l.data,this.wishlistNameToIdMap=this.wishlistArray.reduce((o,p)=>(o[p.wishlist_name]=p.wishlist_id,o),{}),this.wishNames=this.wishlistArray.map(o=>o.wishlist_name),this.loading=!1,console.log("descargando",this.loading)}catch(l){console.error("Error fetching wishlists:",l),this.loading=!1}},openDelete(l){console.log("ITEM"),console.log(l),this.wishlistId=l,this.dialogDelete=!0},async deleteWishlist(){try{const l=j(this.wishlistId);console.log("DELETED",this.wishlistId),console.log(l),this.dialogDelete=!1,this.fetchWishlists()}catch(l){console.log(l)}},selectInventoryId(){console.log("Selected Inventory:",this.selectedInventory)},downloadPdf(){console.log("Download PDF")},toggleDetails(l){this.showDetails[l]=!this.showDetails[l]}},mounted(){const l=localStorage.getItem("accessToken");this.verifyTokenAuth(l),this.fetchWishlists()}},z=_("h2",null,"Lista de deseos",-1),G=_("br",null,null,-1),O=_("span",null,"Confirmar Eliminación",-1),H={class:"pa-4 text-center"};function J(l,o,p,K,i,h){const V=n("v-progress-circular"),c=n("v-col"),E=n("v-img"),x=n("v-card-title"),N=n("v-card-subtitle"),r=n("v-btn"),C=n("v-spacer"),v=n("v-card-actions"),I=n("v-divider"),W=n("v-list-item-content"),b=n("v-icon"),P=n("v-avatar"),L=n("v-list-item"),g=n("v-card-text"),B=n("v-expand-transition"),f=n("v-card"),A=n("v-row"),S=n("v-dialog"),m=n("v-text-field");return u(),y(w,null,[z,G,e(A,null,{default:t(()=>[i.loading?(u(),k(c,{key:0,cols:"12",class:"text-center"},{default:t(()=>[e(V,{size:200,width:17,color:"primary",indeterminate:""})]),_:1})):(u(!0),y(w,{key:1},T(i.wishlistArray,(s,X)=>(u(),k(c,{cols:"3",key:s._id},{default:t(()=>[e(f,{class:"mx-auto","max-width":"344"},{default:t(()=>[e(E,{height:"200px",src:"https://cdn.vuetifyjs.com/images/cards/sunshine.jpg",cover:""}),e(x,null,{default:t(()=>[a(D(s.wishlist_name),1)]),_:2},1024),e(N,null,{default:t(()=>[a("Presupuesto: "+D(s.budget),1)]),_:2},1024),e(v,null,{default:t(()=>[e(r,{color:"orange-lighten-2",onClick:d=>h.toggleDetails(s._id)},{default:t(()=>[a("Ver Productos")]),_:2},1032,["onClick"]),e(C),e(r,{icon:i.showDetails[s._id]?"mdi-chevron-up":"mdi-chevron-down",onClick:d=>h.toggleDetails(s._id)},null,8,["icon","onClick"])]),_:2},1024),e(B,null,{default:t(()=>[q(_("div",null,[e(I),e(g,null,{default:t(()=>[(u(!0),y(w,null,T(s.product,d=>(u(),k(L,{key:d._id,subtitle:d.price,title:d.product_name},{prepend:t(()=>[e(P,{color:"grey-lighten-1"},{default:t(()=>[e(b,{color:"white"},{default:t(()=>[a("mdi-shopping")]),_:1})]),_:1})]),append:t(()=>[e(r,{color:"grey-lighten-1",icon:"mdi-trash-can-outline",variant:"text",click:"dialogDelete = true"})]),default:t(()=>[e(W,null,{default:t(()=>[a("Cantidad: "+D(d.quantity),1)]),_:2},1024)]),_:2},1032,["subtitle","title"]))),128))]),_:2},1024)],512),[[F,i.showDetails[s._id]]])]),_:2},1024),e(c,null,{default:t(()=>[e(r,{onClick:d=>h.openDelete(s._id),color:"red",density:"compact"},{default:t(()=>[e(b,null,{default:t(()=>[a("mdi-trash-can-outline")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(S,{modelValue:i.dialogDelete,"onUpdate:modelValue":o[1]||(o[1]=s=>i.dialogDelete=s),persistent:"","max-width":"500px"},{default:t(()=>[e(f,null,{default:t(()=>[e(x,null,{default:t(()=>[O]),_:1}),e(g,null,{default:t(()=>[a(" ¿Estás seguro de que deseas eliminar esto? ")]),_:1}),e(v,null,{default:t(()=>[e(r,{onClick:o[0]||(o[0]=s=>i.dialogDelete=!1)},{default:t(()=>[a("Cancelar")]),_:1}),e(r,{color:"red",onClick:h.deleteWishlist},{default:t(()=>[a("Eliminar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),_("div",H,[e(S,{modelValue:i.dialog,"onUpdate:modelValue":o[4]||(o[4]=s=>i.dialog=s),"max-width":"600"},{default:t(()=>[e(f,{"prepend-icon":"mdi-folder-outline",title:"Agregar Wish-List"},{default:t(()=>[e(g,null,{default:t(()=>[e(A,{dense:""},{default:t(()=>[e(c,{cols:"12",md:"4",sm:"6"},{default:t(()=>[e(m,{label:"Item",required:""})]),_:1}),e(c,{cols:"12",md:"4",sm:"6"},{default:t(()=>[e(m,{hint:"Rack",label:"Rack"})]),_:1}),e(c,{cols:"12",md:"4",sm:"6"},{default:t(()=>[e(m,{hint:"Stock",label:"Stock"})]),_:1}),e(c,{cols:"12",md:"4",sm:"6"},{default:t(()=>[e(m,{hint:"ID",label:"ID"})]),_:1})]),_:1})]),_:1}),e(I),e(v,null,{default:t(()=>[e(C),e(r,{text:"Close",variant:"plain",onClick:o[2]||(o[2]=s=>i.dialog=!1)}),e(r,{color:"primary",text:"Save",variant:"tonal",onClick:o[3]||(o[3]=s=>i.dialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64)}const ee=U(M,[["render",J]]);export{ee as default};
