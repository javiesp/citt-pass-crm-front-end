import{u as S}from"./userApi.9f2b6974.js";import{_ as C,a as t,o as r,e as x,b as o,w as e,c as w,g as c,h as i,F as N,d as T}from"./entry.8a599742.js";import"./axios.4d564c32.js";const U=""+new URL("citt_logo.3e785fd1.png",import.meta.url).href,A={data(){return{dialog:!1,dialogError:!1,step:1,loginDto:{email:null,hashed_password:null},loginArray:[],loading:!1,bearerToken:null,mail:null,showPassword:!1}},methods:{async login(){if(this.loading=!0,console.log("INICIANDO SESION"),console.log(this.loginDto),!this.loginDto.email&&!this.loginDto.hashed_password)return this.loading=!1,this.dialog=!0;console.log(this.dialog);try{const a=await S(this.loginDto);this.mail=this.loginDto.email,this.loginArray=a.data,this.bearerToken=this.loginArray.accessToken,console.log("RESPONSE");const l=this.loginArray.accessToken;localStorage.setItem("email",this.mail),localStorage.setItem("accessToken",l),console.log(a),this.$router.push("/gestoringreso")}catch(a){console.error("Error al obtener Inventarios:",a),this.dialogError=!0}finally{this.loading=!1}},toggleShowPassword(){this.showPassword=!this.showPassword}}},j=c("img",{class:"img2",src:U,alt:"",style:{width:"400px",height:"100px","border-radius":"5px"}},null,-1),B=c("h4",null,"Inicia sesi칩n con tu cuenta",-1),F=c("h6",{class:"text-center grey--text"}," Inicia sesi칩n con tu cuenta para continuar ",-1),L={style:{padding:"20px 0"}};function O(a,l,y,u,n,m){const V=t("v-img"),k=t("v-progress-circular"),d=t("v-col"),p=t("v-text-field"),b=t("v-btn"),g=t("v-row"),D=t("v-card-text"),E=t("v-window-item"),I=t("v-window"),_=t("v-card"),P=t("v-container"),f=t("v-icon"),h=t("v-card-title"),v=t("v-dialog");return r(),x(N,null,[o(P,null,{default:e(()=>[o(g,{align:"center",justify:"center"},{default:e(()=>[o(d,{cols:"12",sm:"5"},{default:e(()=>[o(_,{class:"elevation-6 mt-10"},{default:e(()=>[o(V,{height:"250",src:"https://cdn.vuetifyjs.com/images/cards/sunshine.jpg",cover:""}),o(I,{modelValue:n.step,"onUpdate:modelValue":l[2]||(l[2]=s=>n.step=s)},{default:e(()=>[o(E,{value:1},{default:e(()=>[o(D,{class:"mt-12",align:"center"},{default:e(()=>[j,B,F,o(g,{align:"center",justify:"center"},{default:e(()=>[n.loading?(r(),w(d,{key:0,cols:"12",class:"text-center"},{default:e(()=>[o(k,{size:100,width:10,color:"primary",indeterminate:""})]),_:1})):(r(),w(d,{key:1,cols:"12",sm:"8"},{default:e(()=>[o(p,{modelValue:n.loginDto.email,"onUpdate:modelValue":l[0]||(l[0]=s=>n.loginDto.email=s),label:"Email",outlinedF:"",dense:"",color:"blue",autocomplete:"false",class:"mt-16"},null,8,["modelValue"]),o(p,{modelValue:n.loginDto.hashed_password,"onUpdate:modelValue":l[1]||(l[1]=s=>n.loginDto.hashed_password=s),label:"Password",outlined:"",dense:"",color:"blue",autocomplete:"off","append-icon":n.showPassword?"mdi-eye":"mdi-eye-off","onClick:append":m.toggleShowPassword,type:n.showPassword?"text":"password"},null,8,["modelValue","append-icon","onClick:append","type"]),c("div",L,[o(b,{block:"",onClick:m.login},{default:e(()=>[i("Iniciar Sesi칩n")]),_:1},8,["onClick"])])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(v,{modelValue:n.dialog,"onUpdate:modelValue":l[3]||(l[3]=s=>n.dialog=s),"max-width":"450"},{default:e(()=>[o(_,null,{default:e(()=>[o(h,null,{default:e(()=>[o(f,{color:"error"},{default:e(()=>[i("mdi-alert")]),_:1}),i(" Por favor, ingrese sus credenciales ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(v,{modelValue:n.dialogError,"onUpdate:modelValue":l[4]||(l[4]=s=>n.dialogError=s),"max-width":"611"},{default:e(()=>[o(_,null,{default:e(()=>[o(h,null,{default:e(()=>[o(f,{color:"error"},{default:e(()=>[i("mdi-alert")]),_:1}),i(" Email o contrase침a incorrectos, intente nuevamente ")]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const R=C(A,[["render",O]]),H=T({__name:"Login",setup(a){return(l,y)=>{const u=R;return r(),x("div",null,[o(u)])}}});export{H as default};
