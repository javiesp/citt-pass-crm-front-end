import{a as C}from"./userApi.248f1fe6.js";import{_ as S,a as t,o as r,e as x,b as e,w as o,c as w,g as c,h as i,F as T,d as N}from"./entry.5cb16beb.js";import"./axios.4d564c32.js";const U=""+new URL("citt_logo.3e785fd1.png",import.meta.url).href,A={data(){return{dialog:!1,dialogError:!1,step:1,loginDto:{email:null,hashed_password:null},loginArray:[],loading:!1,bearerToken:null,mail:null,showPassword:!1}},methods:{navigate(){this.$router.push("/gestoringreso")},async login(){if(this.loading=!0,console.log("INICIANDO SESION"),console.log("LOGIN DTO",this.loginDto),!this.loginDto.email||!this.loginDto.hashed_password){this.loading=!1,this.dialog=!0;return}try{const a=await C(this.loginDto);this.mail=this.loginDto.email,this.loginArray=a.data,this.bearerToken=this.loginArray.accessToken;const n=this.loginArray.accessToken;localStorage.setItem("email",this.mail),localStorage.setItem("accessToken",n),this.navigate(),console.log("Success !!!")}catch(a){console.error("Error al iniciar:",a),this.dialogError=!0}finally{this.loading=!1}},toggleShowPassword(){this.showPassword=!this.showPassword}}},j=c("img",{class:"img2",src:U,alt:"",style:{width:"400px",height:"100px","border-radius":"5px"}},null,-1),B=c("h4",null,"Inicia sesi칩n con tu cuenta",-1),F=c("h6",{class:"text-center grey--text"}," Inicia sesi칩n con tu cuenta para continuar ",-1),L={style:{padding:"20px 0"}};function O(a,n,y,u,l,m){const V=t("v-img"),k=t("v-progress-circular"),d=t("v-col"),p=t("v-text-field"),D=t("v-btn"),g=t("v-row"),b=t("v-card-text"),I=t("v-window-item"),E=t("v-window"),_=t("v-card"),P=t("v-container"),f=t("v-icon"),h=t("v-card-title"),v=t("v-dialog");return r(),x(T,null,[e(P,null,{default:o(()=>[e(g,{align:"center",justify:"center"},{default:o(()=>[e(d,{cols:"12",sm:"5"},{default:o(()=>[e(_,{class:"elevation-6 mt-10"},{default:o(()=>[e(V,{height:"250",src:"https://cdn.vuetifyjs.com/images/cards/sunshine.jpg",cover:""}),e(E,{modelValue:l.step,"onUpdate:modelValue":n[2]||(n[2]=s=>l.step=s)},{default:o(()=>[e(I,{value:1},{default:o(()=>[e(b,{class:"mt-12",align:"center"},{default:o(()=>[j,B,F,e(g,{align:"center",justify:"center"},{default:o(()=>[l.loading?(r(),w(d,{key:0,cols:"12",class:"text-center"},{default:o(()=>[e(k,{size:100,width:10,color:"primary",indeterminate:""})]),_:1})):(r(),w(d,{key:1,cols:"12",sm:"8"},{default:o(()=>[e(p,{modelValue:l.loginDto.email,"onUpdate:modelValue":n[0]||(n[0]=s=>l.loginDto.email=s),label:"Email",outlinedF:"",dense:"",color:"blue",autocomplete:"false",class:"mt-16"},null,8,["modelValue"]),e(p,{modelValue:l.loginDto.hashed_password,"onUpdate:modelValue":n[1]||(n[1]=s=>l.loginDto.hashed_password=s),label:"Password",outlined:"",dense:"",color:"blue",autocomplete:"off","append-icon":l.showPassword?"mdi-eye":"mdi-eye-off","onClick:append":m.toggleShowPassword,type:l.showPassword?"text":"password"},null,8,["modelValue","append-icon","onClick:append","type"]),c("div",L,[e(D,{block:"",onClick:m.login},{default:o(()=>[i("Iniciar Sesi칩n")]),_:1},8,["onClick"])])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{modelValue:l.dialog,"onUpdate:modelValue":n[3]||(n[3]=s=>l.dialog=s),"max-width":"450"},{default:o(()=>[e(_,null,{default:o(()=>[e(h,null,{default:o(()=>[e(f,{color:"error"},{default:o(()=>[i("mdi-alert")]),_:1}),i(" Por favor, ingrese sus credenciales ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(v,{modelValue:l.dialogError,"onUpdate:modelValue":n[4]||(n[4]=s=>l.dialogError=s),"max-width":"611"},{default:o(()=>[e(_,null,{default:o(()=>[e(h,null,{default:o(()=>[e(f,{color:"error"},{default:o(()=>[i("mdi-alert")]),_:1}),i(" Email o contrase침a incorrectos, intente nuevamente ")]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const R=S(A,[["render",O]]),H=N({__name:"Login",setup(a){return(n,y)=>{const u=R;return r(),x("div",null,[e(u)])}}});export{H as default};
