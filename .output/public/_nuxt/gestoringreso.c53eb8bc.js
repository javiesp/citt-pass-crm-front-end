import{g as N,I as T}from"./IngresoSemanal.f9430da7.js";import{d as z,r as m,j as y,k as M,a as o,o as c,e as b,b as t,w as s,l as O,v as R,g as e,h as j,c as h,F as U,f as W,t as f}from"./entry.8a599742.js";import"./userApi.9f2b6974.js";import"./axios.4d564c32.js";import"./projectApi.aebb07c9.js";const H=e("div",{class:"d-sm-flex align-center"},[e("div",null,[e("h3",{class:"text-h5 title mb-1"},"Días más concurridos"),e("h5",{class:"text-subtitle-1"},"Análisis semanal")]),e("div",{class:"ml-auto"},[e("div",{class:"d-flex align-center"},[e("div",{class:"d-flex align-center px-2"},[e("span",{class:"text-primary"},[e("span",{class:"text-overline"},[e("i",{class:"mdi mdi-brightness-1 mx-1"})]),e("span",{class:"font-weight-regular"},"Alumnos")])])])])],-1),K={class:"mt-5"},X={class:"bg-primary pa-5"},q=e("h2",{class:"text-h5 mb-1"},"Últimos ingresos",-1),G=e("h5",{class:"text-subtitle-1"},"Ingresos diarios",-1),J={class:"pa-4"},P={class:"d-flex align-center py-3"},Q=e("div",{class:"mr-3"},null,-1),Y={class:"mx-3"},Z={class:"text-h6 mt-n1 mb-1"},$={class:"truncate-text text-subtitle-2 textSecondary"},ee={class:"text-muted"},ie=z({__name:"gestoringreso",setup(te){m([]);const i=m([]),g=m(!1),p=m(!1),w=async()=>{try{p.value=!0;const a=await N();i.value=a.data,console.log("CHECK IN"),console.log(i.value),p.value=!1}catch(a){console.error(a)}};function C(a,d){const l=document.createElement("a");l.href=URL.createObjectURL(a),l.download=d+".csv",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function k(){i.value;let a="id,uid_user,entry_date,entry_reason,times_entered";i.value.forEach(n=>{let _=n._id+","+n.uid_user+","+n.entry_date+","+n.entry_reason+","+n.times_entered+`
`;a+=_});var d=new Blob([a],{type:"text/csv"});const l="ingresos_citt_"+Date.now();C(d,l)}y(w);const D=M(()=>({grid:{show:!1,borderColor:"transparent",padding:{left:0,right:0,bottom:0}},plotOptions:{bar:{horizontal:!1,columnWidth:"35%",borderRadius:0}},colors:["#1e88e5","#0cb9c5"],fill:{type:"solid",opacity:1},chart:{type:"bar",height:250,offsetX:-15,toolbar:{show:!1},foreColor:"#adb0bb",fontFamily:"inherit",sparkline:{enabled:!1}},dataLabels:{enabled:!1},markers:{size:0},legend:{show:!1},xaxis:{type:"category",categories:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],labels:{style:{cssClass:"grey--text lighten-2--text fill-color"}}},yaxis:{show:!0,min:1,max:40,tickAmount:3,labels:{style:{cssClass:"grey--text lighten-2--text fill-color"}}},stroke:{show:!0,width:5,lineCap:"butt",colors:["transparent"]},tooltip:{theme:"dark"}})),S={series:[{name:"Flexy",data:[3,10,30,2,8,12,4]}]};y(()=>{setTimeout(()=>g.value=!0,10)});function F(){}return(a,d)=>{const l=T,n=o("apexchart"),_=o("v-card-text"),x=o("VCard"),r=o("v-col"),V=o("v-btn"),A=o("v-spacer"),v=o("v-row"),B=o("v-progress-circular"),I=o("v-list-item-title"),L=o("v-list-item"),E=o("v-list");return c(),b("div",null,[t(l),t(v,null,{default:s(()=>[t(r,{cols:"8"},{default:s(()=>[t(x,{class:"pa-3",elevation:"10"},{default:s(()=>[t(_,null,{default:s(()=>[H,O(e("div",K,[t(n,{type:"bar",height:"320",options:D.value,series:S.series},null,8,["options","series"])],512),[[R,g.value]])]),_:1})]),_:1})]),_:1}),t(r,{cols:"4"},{default:s(()=>[t(v,null,{default:s(()=>[t(r,null,{default:s(()=>[t(V,{onClick:k,variant:"tonal",color:"primary"},{default:s(()=>[j("Descargar ingresos")]),_:1})]),_:1}),t(r,null,{default:s(()=>[t(A)]),_:1})]),_:1}),t(x,{elevation:"10",class:"overflow-hidden"},{default:s(()=>[t(_,{class:"pa-0"},{default:s(()=>[e("div",X,[t(v,null,{default:s(()=>[t(r)]),_:1}),q,G]),e("div",J,[p.value?(c(),h(r,{key:0,cols:"12",class:"text-center"},{default:s(()=>[t(B,{size:200,width:17,color:"primary",indeterminate:""})]),_:1})):(c(),h(r,{key:1},{default:s(()=>[t(E,null,{default:s(()=>[(c(!0),b(U,null,W(i.value.slice(0,8),(u,se)=>(c(),h(L,{key:u._id,onClick:F},{default:s(()=>[t(I,null,{default:s(()=>[e("div",P,[Q,e("div",Y,[e("h4",Z,f(u.uid_user),1),e("div",$," Motivo: "+f(u.entry_reason),1),e("div",ee,"Fecha de entrada: "+f(new Date(u.entry_date).toLocaleDateString()),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))])]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{ie as default};
