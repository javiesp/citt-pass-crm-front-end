import{a as V}from"./axios.4d564c32.js";import{g as w}from"./rackApi.412b9ffa.js";import{_ as R,d as E,a as n,e as P,b as o,w as t,g as m,F as N,r as T,o as q,h as i}from"./entry.12f9e6e0.js";V.defaults.validateStatus=function(e){return e>=200&&e<300};const d=V.create({baseURL:"https://citt-pass-api-gateaway-backend-production.up.railway.app",timeout:1e5}),k=localStorage.getItem("accessToken");d.interceptors.request.use(e=>(k&&(e.headers.Authorization=`Bearer ${k}`),e),e=>Promise.reject(e));d.interceptors.response.use(e=>e,e=>Promise.reject(e));const L=()=>d.get("/inventory-management/find-all-inventories"),$=e=>d.get("/inventory-management/find-inventory-by-rack-id",{params:{rack_id:e}}),z=e=>d.delete("/inventory-management/delete-inventory/"+e),B=e=>(console.log(e),d.post("/inventory-management/create-inventory",e)),S=(e,a)=>(console.log("Datos enviados a la API:",a),d.put("/inventory-management/update-inventory/"+e,a)),O=()=>d.get("https://citt-pass-byteboosdt-api-production.up.railway.app/wishlist/find-all-wishList-types"),F=E({name:"inventoryItem",data(){return{loading:!1,search:"",itemsPerPage:5,rowsPerPageItems:[{title:"5",value:5},{title:"10",value:10},{title:"25",value:25},{title:"50",value:50}],headers:[{title:"ID",value:"inventory_id"},{title:"Nombre",value:"inventory_name"},{title:"Productos",value:"product_id"},{title:"Rack ID",value:"rack_id"},{title:"Acciones",value:"actions"}],dialog:!1,dialogRack:!0,inventoryArray:[],inventoryNames:[],rackIds:[],rackNames:[],rackArray:[],productArray:[],rackId:null,inventoryId:T(null),searchQuery:"",dialogVisible:!1,dialogUpdateVisible:!1,alertVisible:!1,errorAlertVisible:!1,selectedItem:{},objectDto:{inventory_id:null,inventory_name:"",rack_id:null}}},computed:{filteredInventory(){return this.searchQuery?this.inventoryArray.filter(e=>e.inventory_name.toLowerCase().includes(this.searchQuery.toLowerCase())):this.inventoryArray}},methods:{async getInventory(){this.loading=!0;try{const e=await L();this.inventoryArray=e.data,this.inventoryNames=this.productArray.results.map(a=>inventory_name.name),console.log("INVENTARIOS"),console.log(this.inventoryNames)}catch(e){console.error("Error al obtener Inventarios:",e),this.errorAlertVisible=!0}finally{this.loading=!1}},async getWishlist(){try{const e=await O();this.productArray=e.data,console.log("ACA MIRA"),console.log(this.productArray)}catch(e){console.error("Error al obtener PRODUCTOS:",e)}},async getRack(){try{const e=await w();this.rackArray=e.data,this.rackNames=this.rackArray.map(a=>a.rack_name),this.rackIds=this.rackArray.map(a=>a.rack_id)}catch(e){console.error("Error al obtener Racks:",e)}},downloadPdf(){const e=document.createElement("a");e.href=this.pdfUrl,e.target="_blank",e.download=this.pdfFileName,document.body.appendChild(e),e.click(),document.body.removeChild(e)},async saveInventory(){console.log("Guardar inventario",this.objectDto);try{const e=await B(this.objectDto);this.dialog=!1,this.getInventory(),console.log("CREATED",e),this.alertVisible=!0,this.objectDto={inventory_id:null,inventory_name:"",rack_id:null}}catch(e){console.error("No se ha podido crear el inventario",this.objectDto.inventory_id,e),this.errorAlertVisible=!0}},openDeleteDialog(e){console.log("ITEM",e._id),this.inventoryId=e._id,this.dialogVisible=!0},closeDeleteDialog(){this.dialogVisible=!1},async confirmDeleteInventory(){console.log("aaaaaaaaaaaaaaaaa",this.inventoryId);try{const e=await z(this.inventoryId);this.dialogVisible=!1,this.getInventory(),console.log("DELETED",e),this.alertVisible=!0}catch(e){console.error("No se ha podido eliminar el inventario",this.inventoryId,e),this.errorAlertVisible=!0}},openUpdateDialog(e){console.log("ITEM",e._id),this.inventoryId=e._id,this.dialogUpdateVisible=!0},closeUpdateDialog(){this.dialogUpdateVisible=!1},async updateInventory(){console.log("DTO",this.objectDto);const e={inventory_id:this.objectDto.inventory_id,inventory_name:this.objectDto.inventory_name,rack_id:this.objectDto.rack_id};try{const a=await S(this.inventoryId,e);this.dialogVisible=!1,this.getInventory(),console.log("UPDATED",a),this.alertVisible=!0,this.dialogUpdateVisible=!1}catch(a){console.error("No se ha podido actualizar el proyecto",this.inventoryId,a),this.errorAlertVisible=!0}},async selectProject(){console.log("SELECTED"),console.log(this.selectedItem);try{this.loading=!0;const e=await $(this.selectedItem);console.log(e),this.inventoryArray=e.data,this.loading=!1,this.dialogRack=!1}catch(e){console.error(e)}},openCreateDialog(){this.dialog=!0},closeCreateDialog(){this.dialog=!1}},mounted(){this.getInventory(),this.getRack(),console.log("aaaaaaaaaaaaa"),this.getWishlist()}}),M=m("h2",null,"Inventarios Citt",-1),Q={class:"pa-4 text-center"},W={class:"pa-4 text-center"},G=m("span",{class:"my-letra"},"Rack",-1),H=m("p",{class:"letra-abajo"},"Es necesario que seleccione su grupo para poder gestionar",-1);function J(e,a,K,X,Y,Z){const c=n("v-text-field"),r=n("v-col"),s=n("v-btn"),h=n("v-divider"),_=n("v-icon"),I=n("v-data-table"),u=n("v-card"),p=n("v-row"),v=n("v-spacer"),b=n("v-card-title"),y=n("v-card-text"),g=n("v-card-actions"),f=n("v-dialog"),D=n("v-combobox"),C=n("v-alert"),A=n("v-autocomplete"),U=n("v-container");return q(),P(N,null,[M,o(p,{class:"month-table"},{default:t(()=>[o(r,{cols:"3"},{default:t(()=>[o(c,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=l=>e.search=l),class:"mx-auto",density:"comfortable","menu-icon":"",placeholder:"Buscar inventario","prepend-inner-icon":"mdi-magnify",theme:"light",variant:"solo","auto-select-first":"","item-props":"",hint:"Escriba para buscar",rounded:""},null,8,["modelValue"])]),_:1}),o(r,{cols:"3"},{default:t(()=>[o(s,{variant:"tonal",color:"primary","prepend-icon":"mdi-folder-outline",onClick:e.openCreateDialog},{default:t(()=>[i("Agregar Inventario")]),_:1},8,["onClick"])]),_:1}),o(r,{cols:"12",sm:"12"},{default:t(()=>[o(u,{variant:e.variant,class:"mx-auto"},{default:t(()=>[o(h),o(r,null,{default:t(()=>[o(I,{"items-per-page":e.itemsPerPage,"onUpdate:itemsPerPage":a[1]||(a[1]=l=>e.itemsPerPage=l),"items-per-page-options":e.rowsPerPageItems,headers:e.headers,items:e.inventoryArray,loading:e.loading,search:e.search},{"item.actions":t(({item:l})=>[o(s,{class:"ml-2",color:"primary",icon:"",size:"x-small",flat:"",onClick:j=>e.openUpdateDialog(l)},{default:t(()=>[o(_,null,{default:t(()=>[i("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),o(s,{class:"ml-2",color:"error",icon:"",size:"x-small",flat:"",onClick:j=>e.openDeleteDialog(l)},{default:t(()=>[o(_,null,{default:t(()=>[i("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","items-per-page-options","headers","items","loading","search"])]),_:1})]),_:1},8,["variant"])]),_:1})]),_:1}),o(f,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=l=>e.dialogVisible=l),"max-width":"400"},{default:t(()=>[o(u,null,{default:t(()=>[o(v),o(b,{class:"text-h5"},{default:t(()=>[i("Confirmar Eliminación")]),_:1}),o(y,null,{default:t(()=>[i("¿Estás seguro de que deseas eliminar este inventario?")]),_:1}),o(g,null,{default:t(()=>[o(v),o(s,{color:"error",text:"",onClick:e.closeDeleteDialog},{default:t(()=>[i("Cancelar")]),_:1},8,["onClick"]),o(s,{color:"primary",text:"",onClick:e.confirmDeleteInventory},{default:t(()=>[i("Eliminar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),m("div",Q,[o(f,{modelValue:e.dialog,"onUpdate:modelValue":a[6]||(a[6]=l=>e.dialog=l),"max-width":"600"},{default:t(()=>[o(u,{"prepend-icon":"mdi-folder-outline",title:"Agregar Inventario"},{default:t(()=>[o(y,null,{default:t(()=>[o(p,{dense:""},{default:t(()=>[o(r,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(c,{label:"Inventario ID",required:"",modelValue:e.objectDto.inventory_id,"onUpdate:modelValue":a[3]||(a[3]=l=>e.objectDto.inventory_id=l)},null,8,["modelValue"])]),_:1}),o(r,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(c,{label:"Nombre Inventario",required:"",modelValue:e.objectDto.inventory_name,"onUpdate:modelValue":a[4]||(a[4]=l=>e.objectDto.inventory_name=l)},null,8,["modelValue"])]),_:1}),o(r,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(D,{items:e.rackIds,label:"Nombre Rack",modelValue:e.objectDto.rack_id,"onUpdate:modelValue":a[5]||(a[5]=l=>e.objectDto.rack_id=l),outlined:""},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1}),o(h),o(g,null,{default:t(()=>[o(v),o(s,{color:"error",text:"Cancelar",variant:"plain",onClick:e.closeCreateDialog},null,8,["onClick"]),o(s,{color:"primary",text:"Guardar Inventario",variant:"tonal",onClick:e.saveInventory},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),m("div",W,[o(f,{modelValue:e.dialogUpdateVisible,"onUpdate:modelValue":a[10]||(a[10]=l=>e.dialogUpdateVisible=l),"max-width":"600"},{default:t(()=>[o(u,{"prepend-icon":"mdi-folder-outline",title:"Actualizar Inventario"},{default:t(()=>[o(y,null,{default:t(()=>[o(p,{dense:""},{default:t(()=>[o(r,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(c,{label:"ID",required:"",modelValue:e.objectDto.inventory_id,"onUpdate:modelValue":a[7]||(a[7]=l=>e.objectDto.inventory_id=l)},null,8,["modelValue"])]),_:1}),o(r,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(c,{label:"Nombre Inventario",required:"",modelValue:e.objectDto.inventory_name,"onUpdate:modelValue":a[8]||(a[8]=l=>e.objectDto.inventory_name=l)},null,8,["modelValue"])]),_:1}),o(r,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(c,{hint:"Rack",label:"Rack ID",modelValue:e.objectDto.rack_id,"onUpdate:modelValue":a[9]||(a[9]=l=>e.objectDto.rack_id=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(h),o(g,null,{default:t(()=>[o(s,{color:"error",text:"",onClick:e.closeUpdateDialog},{default:t(()=>[i("Cancelar")]),_:1},8,["onClick"]),o(s,{color:"primary",text:"",onClick:e.updateInventory},{default:t(()=>[i("Actualizar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o(C,{modelValue:e.errorAlertVisible,"onUpdate:modelValue":a[11]||(a[11]=l=>e.errorAlertVisible=l),dismissible:"",color:"red",border:"left",elevation:"2","colored-border":"",icon:"mdi-alert",timeout:"5000"},{default:t(()=>[i(" Oops! Ha ocurrido un problema. ")]),_:1},8,["modelValue"]),o(f,{modelValue:e.dialogRack,"onUpdate:modelValue":a[13]||(a[13]=l=>e.dialogRack=l),persistent:"",width:"600"},{default:t(()=>[o(u,null,{default:t(()=>[o(b,null,{default:t(()=>[G]),_:1}),o(y,null,{default:t(()=>[o(U,null,{default:t(()=>[o(p,null,{default:t(()=>[o(r,{cols:"12"},{default:t(()=>[o(A,{modelValue:e.selectedItem,"onUpdate:modelValue":a[12]||(a[12]=l=>e.selectedItem=l),label:"Selecciona un rack...",items:e.rackArray,"item-value":"rack_id","item-title":"rack_name",variant:"underlined",onChange:e.selectItem},null,8,["modelValue","items","onChange"]),H]),_:1})]),_:1})]),_:1})]),_:1}),o(g,null,{default:t(()=>[o(v),o(s,{color:"primary",rounded:!0,elevation:"2",variant:"text",onClick:e.selectProject},{default:t(()=>[i(" Login ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const te=R(F,[["render",J]]);export{te as default};
