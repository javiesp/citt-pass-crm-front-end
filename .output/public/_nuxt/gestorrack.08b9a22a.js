import{g as D,c as y,d as C,u as U}from"./rackApi.ba887549.js";import{_ as j,d as A,a as r,e as w,b as a,w as l,g as b,F as I,o as E,h as s}from"./entry.8a599742.js";import"./axios.4d564c32.js";const P=A({name:"rackItem",data(){return{loading:!1,search:"",itemsPerPage:5,rowsPerPageItems:[{title:"5",value:5},{title:"10",value:10},{title:"25",value:25},{title:"50",value:50}],headers:[{title:"ID",value:"rack_id"},{title:"Tipo de rack",value:"rack_type"},{title:"Nombre",value:"rack_name"},{title:"Acciones",value:"actions"}],dialog:!1,rackArray:[],rackNames:[],rackId:null,searchQuery:"",totalRows:0,selectedRack:null,dialogVisible:!1,dialogUpdateVisible:!1,alertVisible:!1,errorAlertVisible:!1,objectDto:{rack_id:null,rack_type:"",rack_name:""},loading:!1}},computed:{filteredRack(){return this.searchQuery?this.rackArray.filter(e=>e.rack_name.toLowerCase().includes(this.searchQuery.toLowerCase())):this.rackArray}},methods:{async getRack(){this.loading=!0;try{const e=await D();console.log(e.data),this.rackArray=e.data,this.rackNames=this.rackArray.map(o=>o.rack_name)}catch(e){console.error("Error al obtener Racks:",e),this.errorAlertVisible=!0}finally{this.loading=!1}},downloadPdf(){const e=document.createElement("a");e.href=this.pdfUrl,e.target="_blank",e.download=this.pdfFileName,document.body.appendChild(e),e.click(),document.body.removeChild(e)},openCreateDialog(){this.dialog=!0},closeCreateDialog(){this.dialog=!1},async saveRack(){console.log("Guardar Rack",this.objectDto);try{const e=await y(this.objectDto);this.dialog=!1,this.getRack(),console.log("CREATED",e),this.alertVisible=!0,this.objectDto={rack_id:null,rack_type:"",rack_name:""}}catch(e){console.error("No se ha podido crear el rack",this.objectDto.rack_id,e),this.errorAlertVisible=!0}},openDeleteDialog(e){this.rackId=e._id,console.log("ITEM",this.rackId),this.dialogVisible=!0},closeDeleteDialog(){this.dialogVisible=!1},async confirmDeleteRack(){console.log("aaaaaaaaaaaaaaaaa",this.rackId);try{const e=await C(this.rackId);this.dialogVisible=!1,this.getRack(),console.log("DELETED",e),this.alertVisible=!0}catch(e){console.error("No se ha podido eliminar el rack",this.rackId,e),this.errorAlertVisible=!0}},openUpdateDialog(e){this.rackId=e._id,console.log("ITEM",this.rackId),this.dialogUpdateVisible=!0},closeUpdateDialog(){this.dialogUpdateVisible=!1},async updateRack(){console.log("ERORRRRRRRRRR",this.objectDto);const e={rack_id:this.objectDto.rack_id,rack_type:this.objectDto.rack_type,rack_name:this.objectDto.rack_name};try{const o=await U(this.rackId,e);this.dialogVisible=!1,this.getRack(),console.log("UPDATED",o),this.alertVisible=!0,this.dialogUpdateVisible=!1}catch(o){console.error("No se ha podido actualizar el rack",this.rackId,o),this.errorAlertVisible=!0}}},mounted(){this.getRack()}}),N=b("h2",null,"Gestor Rack",-1),T={class:"pa-4 text-center"},$={class:"pa-4 text-center"};function q(e,o,z,B,G,F){const n=r("v-text-field"),i=r("v-col"),d=r("v-btn"),u=r("v-divider"),_=r("v-icon"),h=r("v-data-table"),c=r("v-card"),m=r("v-row"),p=r("v-spacer"),V=r("v-card-title"),k=r("v-card-text"),f=r("v-card-actions"),g=r("v-dialog"),v=r("v-alert");return E(),w(I,null,[N,a(m,{class:"month-table"},{default:l(()=>[a(i,{cols:"3"},{default:l(()=>[a(n,{modelValue:e.search,"onUpdate:modelValue":o[0]||(o[0]=t=>e.search=t),class:"mx-auto",density:"comfortable","menu-icon":"",placeholder:"Buscar Rack","prepend-inner-icon":"mdi-magnify",theme:"light",variant:"solo","auto-select-first":"","item-props":"",hint:"Escriba para buscar",rounded:""},null,8,["modelValue"])]),_:1}),a(i,{cols:"3"},{default:l(()=>[a(d,{variant:"tonal",color:"primary",onClick:e.downloadPdf},{default:l(()=>[s("Generar archivo .csv")]),_:1},8,["onClick"])]),_:1}),a(i,{cols:"6",class:"text-right"},{default:l(()=>[a(d,{variant:"tonal",color:"primary","prepend-icon":"mdi-folder-outline",onClick:e.openCreateDialog},{default:l(()=>[s("Agregar Rack")]),_:1},8,["onClick"])]),_:1}),a(i,{cols:"12",sm:"12"},{default:l(()=>[a(c,{variant:e.variant,class:"mx-auto"},{default:l(()=>[a(u),a(i,null,{default:l(()=>[a(h,{"items-per-page":e.itemsPerPage,"onUpdate:itemsPerPage":o[1]||(o[1]=t=>e.itemsPerPage=t),"items-per-page-options":e.rowsPerPageItems,headers:e.headers,items:e.rackArray,loading:e.loading,search:e.search},{"item.actions":l(({item:t})=>[a(d,{class:"ml-2",color:"primary",icon:"",size:"x-small",flat:"",onClick:R=>e.openUpdateDialog(t)},{default:l(()=>[a(_,null,{default:l(()=>[s("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),a(d,{class:"ml-2",color:"error",icon:"",size:"x-small",flat:"",onClick:R=>e.openDeleteDialog(t)},{default:l(()=>[a(_,null,{default:l(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","items-per-page-options","headers","items","loading","search"])]),_:1})]),_:1},8,["variant"])]),_:1})]),_:1}),a(g,{modelValue:e.dialogVisible,"onUpdate:modelValue":o[2]||(o[2]=t=>e.dialogVisible=t),"max-width":"400"},{default:l(()=>[a(c,null,{default:l(()=>[a(p),a(V,{class:"text-h5"},{default:l(()=>[s("Confirmar Eliminación")]),_:1}),a(k,null,{default:l(()=>[s("¿Estás seguro de que deseas eliminar este rack?")]),_:1}),a(f,null,{default:l(()=>[a(p),a(d,{color:"error",text:"",onClick:e.closeDeleteDialog},{default:l(()=>[s("Cancelar")]),_:1},8,["onClick"]),a(d,{color:"primary",text:"",onClick:e.confirmDeleteRack},{default:l(()=>[s("Eliminar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),b("div",T,[a(g,{modelValue:e.dialog,"onUpdate:modelValue":o[6]||(o[6]=t=>e.dialog=t),"max-width":"600"},{default:l(()=>[a(c,{"prepend-icon":"mdi-folder-outline",title:"Agregar Rack"},{default:l(()=>[a(k,null,{default:l(()=>[a(m,{dense:""},{default:l(()=>[a(i,{cols:"12",md:"4",sm:"6"},{default:l(()=>[a(n,{label:"Rack Id",required:"",modelValue:e.objectDto.rack_id,"onUpdate:modelValue":o[3]||(o[3]=t=>e.objectDto.rack_id=t)},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4",sm:"6"},{default:l(()=>[a(n,{label:"Tipo Rack",required:"",modelValue:e.objectDto.rack_type,"onUpdate:modelValue":o[4]||(o[4]=t=>e.objectDto.rack_type=t)},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4",sm:"6"},{default:l(()=>[a(n,{hint:"Rack",label:"Nombre Rack",modelValue:e.objectDto.rack_name,"onUpdate:modelValue":o[5]||(o[5]=t=>e.objectDto.rack_name=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(u),a(f,null,{default:l(()=>[a(p),a(d,{color:"error",text:"Cancelar",variant:"plain",onClick:e.closeCreateDialog},null,8,["onClick"]),a(d,{color:"primary",text:"Guardar Inventario",variant:"tonal",onClick:e.saveRack},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),b("div",$,[a(g,{modelValue:e.dialogUpdateVisible,"onUpdate:modelValue":o[10]||(o[10]=t=>e.dialogUpdateVisible=t),"max-width":"600"},{default:l(()=>[a(c,{"prepend-icon":"mdi-folder-outline",title:"Actualizar Rack"},{default:l(()=>[a(k,null,{default:l(()=>[a(m,{dense:""},{default:l(()=>[a(i,{cols:"12",md:"4",sm:"6"},{default:l(()=>[a(n,{label:"ID Rack",required:"",modelValue:e.objectDto.rack_id,"onUpdate:modelValue":o[7]||(o[7]=t=>e.objectDto.rack_id=t)},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4",sm:"6"},{default:l(()=>[a(n,{label:"Tipo Rack",required:"",modelValue:e.objectDto.rack_type,"onUpdate:modelValue":o[8]||(o[8]=t=>e.objectDto.rack_type=t)},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4",sm:"6"},{default:l(()=>[a(n,{hint:"Rack",label:"Nombre Rack",modelValue:e.objectDto.rack_name,"onUpdate:modelValue":o[9]||(o[9]=t=>e.objectDto.rack_name=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(u),a(f,null,{default:l(()=>[a(d,{color:"error",text:"",onClick:e.closeUpdateDialog},{default:l(()=>[s("Cancelar")]),_:1},8,["onClick"]),a(d,{color:"primary",text:"",onClick:e.updateRack},{default:l(()=>[s("Actualizar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a(v,{modelValue:e.errorAlertVisible,"onUpdate:modelValue":o[11]||(o[11]=t=>e.errorAlertVisible=t),dismissible:"",color:"red",border:"left",elevation:"2","colored-border":"",icon:"mdi-alert",timeout:"5000"},{default:l(()=>[s(" Oops! Ha ocurrido un problema. ")]),_:1},8,["modelValue"])],64)}const O=j(P,[["render",q]]);export{O as default};
