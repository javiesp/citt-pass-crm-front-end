import{g as N}from"./userApi.cc7d1a1a.js";import{g as D}from"./projectApi.0e4acb4b.js";import{_ as R,d as x,a,b as m,e as u,f as e,w as o,k as f,h as s,F as h,i as E,t as d}from"./entry.bc374d72.js";console.log("");const q=x({data(){return{name:"DownloadPdfButton",props:{pdfUrl:{type:String,required:!0},pdfFileName:{type:String,required:!0}},dialog:!1,usersArray:[],projectArray:[],projectsNames:[],projectId:0,totalRows:0,selectedProyect:null,items:[1,2,3,4,5,6,7,8,9,10],userRole:["Admin citt","Profesor","Alumno","CIA","MMT"],uidUser:["OIUUYFASD","ASDIUAD908","908DKJHAS"],loading:!1}},methods:{async getUsers(){this.loading=!0;const t=this.selectedProyect;try{const l=await N(t);this.usersArray=l.data,this.totalRows=l.data.total,console.log("ARRAY",this.usersArray)}catch(l){console.error("Error al obtener usuarios:",l)}finally{this.loading=!1}},async getProjects(){this.loading=!0;try{const t=await D();this.projectArray=t.data,this.projectsNames=this.projectArray.map(l=>l.project_name),this.totalRows=t.data.total}catch(t){console.error("Error al obtener proyectos:",t)}finally{this.loading=!1}},selectProjectId(){const t=this.projectArray.find(l=>l.project_name===this.selectedProyect);t?(this.projectId=t.project_id,console.log("projectId seleccionado:",this.projectId)):console.error("No se encontró el projectId para el proyecto seleccionado")},downloadPdf(){console.log("PDFURLLLL"),console.log(this.pdfUrl);const t=document.createElement("a");t.href=this.pdfUrl,t.target="_blank",t.download=this.pdfFileName,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},watch:{selectedProyect:function(t,l){console.log(this.projectsNames),t!==l&&this.getUsers()}},async created(){await this.getUsers(),await this.getProjects(),await this.selectProyect()}}),V=s("p",{class:"font-weight-medium"}," Descargar PDF ",-1),S=s("p",{class:"font-weight-medium"}," Agregar usuario ",-1),F=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"UID usuario"),s("th",{class:"text-left"},"Alumno"),s("th",{class:"text-left"},"Teléfono"),s("th",{class:"text-left"},"Email"),s("th",{class:"text-left"},"Id Proyecto"),s("th",{class:"text-left"},"Acción")])],-1),$={class:"pa-4 text-center"},B=s("small",{class:"text-caption text-medium-emphasis"},"* Indica que el campo es obligatorio",-1);function L(t,l,T,z,M,Y){const g=a("v-combobox"),r=a("v-col"),c=a("v-btn"),v=a("IconEdit"),y=a("BellIcon"),b=a("v-table"),j=a("UiChildCard"),p=a("v-row"),i=a("v-text-field"),_=a("v-select"),I=a("v-autocomplete"),w=a("v-card-text"),A=a("v-divider"),U=a("v-spacer"),P=a("v-card-actions"),C=a("v-card"),k=a("v-dialog");return m(),u(h,null,[e(p,{class:"month-table"},{default:o(()=>[e(r,{cols:"3"},{default:o(()=>[e(g,{modelValue:t.selectedProjectName,"onUpdate:modelValue":l[0]||(l[0]=n=>t.selectedProjectName=n),items:t.projectsNames,label:"Proyecto",outlined:"",onChange:t.selectProjectId},null,8,["modelValue","items","onChange"])]),_:1}),e(r,{cols:"3"},{default:o(()=>[V,e(c,{variant:"tonal",color:"primary",onClick:t.downloadPdf},{default:o(()=>[f("Generar archivo .cvs")]),_:1},8,["onClick"])]),_:1}),e(r,{cols:"6",class:"text-right"},{default:o(()=>[S,e(c,{variant:"tonal",color:"primary","prepend-icon":"mdi-account",onClick:l[1]||(l[1]=n=>t.dialog=!0)},{default:o(()=>[f("Registrar")]),_:1})]),_:1}),e(r,{cols:"12",sm:"12"},{default:o(()=>[e(j,{title:"Ingresos citt"},{default:o(()=>[e(b,null,{default:o(()=>[F,s("tbody",null,[(m(!0),u(h,null,E(t.usersArray,n=>(m(),u("tr",{key:n.uid_user},[s("td",null,d(n.uid_user),1),s("td",null,d(n.name),1),s("td",null,d(n.phone),1),s("td",null,d(n.email),1),s("td",null,d(n.proyect_id),1),s("td",null,[e(r,null,{default:o(()=>[e(c,{class:"margin-left",color:"primary",icon:"",size:"x-small",flat:""},{default:o(()=>[e(v,{stroke:"{2}"})]),_:1}),e(c,{class:"margin-left",color:"primary",icon:"",size:"x-small",flat:""},{default:o(()=>[e(y,{"stroke-width":"1.5"})]),_:1})]),_:1})])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),s("div",$,[e(k,{modelValue:t.dialog,"onUpdate:modelValue":l[4]||(l[4]=n=>t.dialog=n),"max-width":"600"},{default:o(()=>[e(C,{"prepend-icon":"mdi-account",title:"Crear Usuario"},{default:o(()=>[e(w,null,{default:o(()=>[e(p,{dense:""},{default:o(()=>[e(r,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{label:"Nombre*",required:""})]),_:1}),e(r,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{hint:"email@duocuc.cl/ email@profesor.duoc.cl",label:"Email"})]),_:1}),e(r,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{hint:"Ej: 9 1112223345",label:"Teléfono*","persistent-hint":"",required:""})]),_:1}),e(r,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{label:"Email*",required:""})]),_:1}),e(r,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{label:"Constraseña*",type:"password",required:""})]),_:1}),e(r,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{hint:"Ej: 11.111.111-1",label:"RUN*",required:""})]),_:1}),e(r,{cols:"12",sm:"6"},{default:o(()=>[e(_,{items:t.items,label:"ID proyecto",required:""},null,8,["items"])]),_:1}),e(r,{cols:"12",sm:"6"},{default:o(()=>[e(I,{items:t.userRole,label:"Rol","auto-select-first":"",multiple:""},null,8,["items"])]),_:1}),e(r,{cols:"12",sm:"6"},{default:o(()=>[e(_,{items:t.uidUser,label:"UID*","auto-select-first":"",hint:"UID registrada por arduino",required:""},null,8,["items"])]),_:1})]),_:1}),B]),_:1}),e(A),e(P,null,{default:o(()=>[e(U),e(c,{text:"Close",variant:"plain",onClick:l[2]||(l[2]=n=>t.dialog=!1)}),e(c,{color:"primary",text:"Save",variant:"tonal",onClick:l[3]||(l[3]=n=>t.dialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64)}const K=R(q,[["render",L]]);export{K as I};
