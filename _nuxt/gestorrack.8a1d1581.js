import{g as A,c as w,d as E,u as I}from"./rackApi.ba887549.js";import{_ as N,d as T,a as r,e as b,f as l,w as a,h as i,F as v,b as h,k as n,i as $,t as g}from"./entry.bc374d72.js";import"./axios.4d564c32.js";const q=T({data(){return{dialog:!1,rackArray:[],rackNames:[],rackId:null,searchQuery:"",totalRows:0,selectedRack:null,dialogVisible:!1,dialogUpdateVisible:!1,alertVisible:!1,errorAlertVisible:!1,objectDto:{rack_id:null,rack_type:"",rack_name:""},loading:!1}},computed:{filteredRack(){return this.searchQuery?this.rackArray.filter(e=>e.rack_name.toLowerCase().includes(this.searchQuery.toLowerCase())):this.rackArray}},methods:{async getRack(){this.loading=!0;try{const e=await A();console.log(e.data),this.rackArray=e.data,this.rackNames=this.rackArray.map(o=>o.rack_name)}catch(e){console.error("Error al obtener Racks:",e),this.errorAlertVisible=!0}finally{this.loading=!1}},downloadPdf(){const e=document.createElement("a");e.href=this.pdfUrl,e.target="_blank",e.download=this.pdfFileName,document.body.appendChild(e),e.click(),document.body.removeChild(e)},openCreateDialog(){this.dialog=!0},closeCreateDialog(){this.dialog=!1},async saveRack(){console.log("Guardar Rack",this.objectDto);try{const e=await w(this.objectDto);this.dialog=!1,this.getRack(),console.log("CREATED",e),this.alertVisible=!0,this.objectDto={rack_id:null,rack_type:"",rack_name:""}}catch(e){console.error("No se ha podido crear el rack",this.objectDto.rack_id,e),this.errorAlertVisible=!0}},openDeleteDialog(e){this.rackId=e,this.dialogVisible=!0},closeDeleteDialog(){this.dialogVisible=!1},async confirmDeleteRack(){console.log("aaaaaaaaaaaaaaaaa",this.rackId);try{const e=await E(this.rackId);this.dialogVisible=!1,this.getRack(),console.log("DELETED",e),this.alertVisible=!0}catch(e){console.error("No se ha podido eliminar el rack",this.rackId,e),this.errorAlertVisible=!0}},openUpdateDialog(e){console.log("ERORRRRRRRRRR",this.rackId),this.rackId=e,this.dialogUpdateVisible=!0},closeUpdateDialog(){this.dialogUpdateVisible=!1},async updateRack(){console.log("ERORRRRRRRRRR",this.objectDto);const e={rack_id:this.objectDto.rack_id,rack_type:this.objectDto.rack_type,rack_name:this.objectDto.rack_name};try{const o=await I(this.rackId,e);this.dialogVisible=!1,this.getRack(),console.log("UPDATED",o),this.alertVisible=!0,this.dialogUpdateVisible=!1}catch(o){console.error("No se ha podido actualizar el rack",this.rackId,o),this.errorAlertVisible=!0}}},mounted(){this.getRack()}}),z=i("h2",null,"Gestor Rack",-1),Q=i("thead",null,[i("tr",null,[i("th",{class:"text-left"},"ID Rack"),i("th",{class:"text-left"},"Tipo"),i("th",{class:"text-left"},"Nombre"),i("th",{class:"text-left"},"Accion")])],-1),B={class:"pa-4 text-center"},G={class:"pa-4 text-center"};function L(e,o,F,O,P,H){const D=r("v-autocomplete"),s=r("v-col"),d=r("v-btn"),R=r("v-icon"),y=r("v-table"),u=r("v-row"),m=r("v-spacer"),C=r("v-card-title"),p=r("v-card-text"),k=r("v-card-actions"),f=r("v-card"),_=r("v-dialog"),c=r("v-text-field"),V=r("v-divider"),U=r("v-alert");return h(),b(v,null,[z,l(u,{class:"month-table"},{default:a(()=>[l(s,{cols:"3"},{default:a(()=>[l(D,{items:e.rackNames,"item-value":"rackArray.rack_name",class:"mx-auto",density:"comfortable","menu-icon":"",placeholder:"Buscar Rack","prepend-inner-icon":"mdi-magnify",style:{"max-width":"350px"},theme:"light",variant:"solo","auto-select-first":"",modelValue:e.searchQuery,"onUpdate:modelValue":o[0]||(o[0]=t=>e.searchQuery=t),"item-props":"",hint:"Escriba para buscar",rounded:""},null,8,["items","modelValue"])]),_:1}),l(s,{cols:"3"},{default:a(()=>[l(d,{variant:"tonal",color:"primary",onClick:e.downloadPdf},{default:a(()=>[n("Generar archivo .csv")]),_:1},8,["onClick"])]),_:1}),l(s,{cols:"6",class:"text-right"},{default:a(()=>[l(d,{variant:"tonal",color:"primary","prepend-icon":"mdi-folder-outline",onClick:e.openCreateDialog},{default:a(()=>[n("Agregar Rack")]),_:1},8,["onClick"])]),_:1}),l(s,{cols:"12",sm:"12"},{default:a(()=>[l(y,null,{default:a(()=>[Q,i("tbody",null,[(h(!0),b(v,null,$(e.filteredRack,t=>(h(),b("tr",{key:t.rack_name},[i("td",null,g(t.rack_id),1),i("td",null,g(t.rack_type),1),i("td",null,g(t.rack_name),1),i("td",null,[l(s,null,{default:a(()=>[l(d,{class:"ml-2",color:"primary",icon:"",size:"x-small",flat:"",onClick:j=>e.openUpdateDialog(t._id)},{default:a(()=>[l(R,null,{default:a(()=>[n("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),l(d,{class:"ml-2",color:"error",icon:"",size:"x-small",flat:"",onClick:j=>e.openDeleteDialog(t._id)},{default:a(()=>[l(R,null,{default:a(()=>[n("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1}),l(_,{modelValue:e.dialogVisible,"onUpdate:modelValue":o[1]||(o[1]=t=>e.dialogVisible=t),"max-width":"400"},{default:a(()=>[l(f,null,{default:a(()=>[l(m),l(C,{class:"text-h5"},{default:a(()=>[n("Confirmar Eliminación")]),_:1}),l(p,null,{default:a(()=>[n("¿Estás seguro de que deseas eliminar este rack?")]),_:1}),l(k,null,{default:a(()=>[l(m),l(d,{color:"error",text:"",onClick:e.closeDeleteDialog},{default:a(()=>[n("Cancelar")]),_:1},8,["onClick"]),l(d,{color:"primary",text:"",onClick:e.confirmDeleteRack},{default:a(()=>[n("Eliminar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i("div",B,[l(_,{modelValue:e.dialog,"onUpdate:modelValue":o[5]||(o[5]=t=>e.dialog=t),"max-width":"600"},{default:a(()=>[l(f,{"prepend-icon":"mdi-folder-outline",title:"Agregar Rack"},{default:a(()=>[l(p,null,{default:a(()=>[l(u,{dense:""},{default:a(()=>[l(s,{cols:"12",md:"4",sm:"6"},{default:a(()=>[l(c,{label:"Rack Id",required:"",modelValue:e.objectDto.rack_id,"onUpdate:modelValue":o[2]||(o[2]=t=>e.objectDto.rack_id=t)},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"4",sm:"6"},{default:a(()=>[l(c,{label:"Tipo Rack",required:"",modelValue:e.objectDto.rack_type,"onUpdate:modelValue":o[3]||(o[3]=t=>e.objectDto.rack_type=t)},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"4",sm:"6"},{default:a(()=>[l(c,{hint:"Rack",label:"Nombre Rack",modelValue:e.objectDto.rack_name,"onUpdate:modelValue":o[4]||(o[4]=t=>e.objectDto.rack_name=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(V),l(k,null,{default:a(()=>[l(m),l(d,{color:"error",text:"Cancelar",variant:"plain",onClick:e.closeCreateDialog},null,8,["onClick"]),l(d,{color:"primary",text:"Guardar Inventario",variant:"tonal",onClick:e.saveRack},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),i("div",G,[l(_,{modelValue:e.dialogUpdateVisible,"onUpdate:modelValue":o[9]||(o[9]=t=>e.dialogUpdateVisible=t),"max-width":"600"},{default:a(()=>[l(f,{"prepend-icon":"mdi-folder-outline",title:"Actualizar Rack"},{default:a(()=>[l(p,null,{default:a(()=>[l(u,{dense:""},{default:a(()=>[l(s,{cols:"12",md:"4",sm:"6"},{default:a(()=>[l(c,{label:"ID Rack",required:"",modelValue:e.objectDto.rack_id,"onUpdate:modelValue":o[6]||(o[6]=t=>e.objectDto.rack_id=t)},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"4",sm:"6"},{default:a(()=>[l(c,{label:"Tipo Rack",required:"",modelValue:e.objectDto.rack_type,"onUpdate:modelValue":o[7]||(o[7]=t=>e.objectDto.rack_type=t)},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"4",sm:"6"},{default:a(()=>[l(c,{hint:"Rack",label:"Nombre Rack",modelValue:e.objectDto.rack_name,"onUpdate:modelValue":o[8]||(o[8]=t=>e.objectDto.rack_name=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(V),l(k,null,{default:a(()=>[l(d,{color:"error",text:"",onClick:e.closeUpdateDialog},{default:a(()=>[n("Cancelar")]),_:1},8,["onClick"]),l(d,{color:"primary",text:"",onClick:e.updateRack},{default:a(()=>[n("Actualizar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l(U,{modelValue:e.errorAlertVisible,"onUpdate:modelValue":o[10]||(o[10]=t=>e.errorAlertVisible=t),dismissible:"",color:"red",border:"left",elevation:"2","colored-border":"",icon:"mdi-alert",timeout:"5000"},{default:a(()=>[n(" Oops! Ha ocurrido un problema. ")]),_:1},8,["modelValue"])],64)}const M=N(q,[["render",L]]);export{M as default};
