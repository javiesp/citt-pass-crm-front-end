import{a as R}from"./axios.4d564c32.js";import{g as P}from"./rackApi.ba887549.js";import{_ as T,d as $,a as n,e as h,f as o,w as t,h as r,F as D,r as q,b,k as s,i as z,t as g}from"./entry.bc374d72.js";R.defaults.validateStatus=function(e){return e>=200&&e<300};const c=R.create({baseURL:"http://localhost:3005/",timeout:1e5}),I=localStorage.getItem("accessToken");c.interceptors.request.use(e=>(I&&(e.headers.Authorization=`Bearer ${I}`),e),e=>Promise.reject(e));c.interceptors.response.use(e=>e,e=>Promise.reject(e));const L=()=>c.get("/inventory-management/find-all-inventories"),B=e=>c.delete("/inventory-management/delete-inventory/"+e),O=e=>(console.log(e),c.post("/inventory-management/create-inventory",e)),Q=(e,l)=>(console.log("Datos enviados a la API:",l),c.put("/inventory-management/update-inventory/"+e,l)),S=()=>c.get("https://citt-pass-byteboosdt-api-production.up.railway.app/wishlist/find-all-wishList-types"),F=$({data(){return{dialog:!1,inventoryArray:[],inventoryNames:[],rackIds:[],rackNames:[],rackArray:[],productArray:[],rackId:null,inventoryId:q(null),searchQuery:"",dialogVisible:!1,dialogUpdateVisible:!1,alertVisible:!1,errorAlertVisible:!1,objectDto:{inventory_id:null,inventory_name:"",rack_id:null}}},computed:{filteredInventory(){return this.searchQuery?this.inventoryArray.filter(e=>e.inventory_name.toLowerCase().includes(this.searchQuery.toLowerCase())):this.inventoryArray}},methods:{async getInventory(){this.loading=!0;try{const e=await L();this.inventoryArray=e.data}catch(e){console.error("Error al obtener Inventarios:",e),this.errorAlertVisible=!0}finally{this.loading=!1}},async getWishlist(){try{const e=await S();this.productArray=e.data,console.log("ACA MIRA"),console.log(this.productArray)}catch(e){console.error("Error al obtener PRODUCTOS:",e)}},async getRack(){try{const e=await P();this.rackArray=e.data,this.rackNames=this.rackArray.map(l=>l.rack_name),this.rackIds=this.rackArray.map(l=>l.rack_id)}catch(e){console.error("Error al obtener Racks:",e)}},downloadPdf(){const e=document.createElement("a");e.href=this.pdfUrl,e.target="_blank",e.download=this.pdfFileName,document.body.appendChild(e),e.click(),document.body.removeChild(e)},async saveInventory(){console.log("Guardar inventario",this.objectDto);try{const e=await O(this.objectDto);this.dialog=!1,this.getInventory(),console.log("CREATED",e),this.alertVisible=!0,this.objectDto={inventory_id:null,inventory_name:"",rack_id:null}}catch(e){console.error("No se ha podido crear el inventario",this.objectDto.inventory_id,e),this.errorAlertVisible=!0}},openDeleteDialog(e){this.inventoryId=e,this.dialogVisible=!0},closeDeleteDialog(){this.dialogVisible=!1},async confirmDeleteInventory(){console.log("aaaaaaaaaaaaaaaaa",this.inventoryId);try{const e=await B(this.inventoryId);this.dialogVisible=!1,this.getInventory(),console.log("DELETED",e),this.alertVisible=!0}catch(e){console.error("No se ha podido eliminar el inventario",this.inventoryId,e),this.errorAlertVisible=!0}},openUpdateDialog(e){console.log("ERORRRRRRRRRR",this.inventoryId),this.inventoryId=e,this.dialogUpdateVisible=!0},closeUpdateDialog(){this.dialogUpdateVisible=!1},async updateInventory(){console.log("ERORRRRRRRRRR",this.objectDto);const e={inventory_id:this.objectDto.inventory_id,inventory_name:this.objectDto.inventory_name,rack_id:this.objectDto.rack_id};try{const l=await Q(this.inventoryId,e);this.dialogVisible=!1,this.getInventory(),console.log("UPDATED",l),this.alertVisible=!0,this.dialogUpdateVisible=!1}catch(l){console.error("No se ha podido actualizar el proyecto",this.inventoryId,l),this.errorAlertVisible=!0}},openCreateDialog(){this.dialog=!0},closeCreateDialog(){this.dialog=!1}},mounted(){this.getInventory(),this.getRack(),console.log("aaaaaaaaaaaaa"),this.getWishlist()}}),G=r("h2",null,"Inventarios Citt",-1),W=r("thead",null,[r("tr",null,[r("th",{class:"text-left"},"ID"),r("th",{class:"text-left"},"Nombre Inventario"),r("th",{class:"text-left"},"Rack ID"),r("th",{class:"text-left"},"Acción")])],-1),H={class:"pa-4 text-center"},M={class:"pa-4 text-center"};function J(e,l,K,X,Y,Z){const C=n("v-select"),i=n("v-col"),A=n("v-autocomplete"),d=n("v-btn"),k=n("v-icon"),U=n("v-table"),m=n("v-row"),v=n("v-spacer"),j=n("v-card-title"),p=n("v-card-text"),y=n("v-card-actions"),f=n("v-card"),_=n("v-dialog"),u=n("v-text-field"),w=n("v-combobox"),V=n("v-divider"),E=n("v-alert");return b(),h(D,null,[G,o(m,{class:"month-table"},{default:t(()=>[o(i,{cols:"3"},{default:t(()=>[o(C,{modelValue:e.rackId,"onUpdate:modelValue":l[0]||(l[0]=a=>e.rackId=a),label:"Rack Nombre",items:e.rackNames},null,8,["modelValue","items"])]),_:1}),o(i,{cols:"3"},{default:t(()=>[o(A,{items:e.inventoryNames,"item-value":"inventoryArray.inventory_id",class:"mx-auto",density:"comfortable","menu-icon":"",placeholder:"Buscar Inventario","prepend-inner-icon":"mdi-magnify",style:{"max-width":"350px"},theme:"light",variant:"solo","auto-select-first":"",modelValue:e.searchQuery,"onUpdate:modelValue":l[1]||(l[1]=a=>e.searchQuery=a),"item-props":"",hint:"Escriba para buscar",rounded:""},null,8,["items","modelValue"])]),_:1}),o(i,{cols:"3"},{default:t(()=>[o(d,{variant:"tonal",color:"primary",onClick:e.downloadPdf},{default:t(()=>[s("Generar archivo .csv")]),_:1},8,["onClick"])]),_:1}),o(i,{cols:"3",class:"text-right"},{default:t(()=>[o(d,{variant:"tonal",color:"primary","prepend-icon":"mdi-folder-outline",onClick:e.openCreateDialog},{default:t(()=>[s("Agregar Inventario")]),_:1},8,["onClick"])]),_:1}),o(i,{cols:"12",sm:"12"},{default:t(()=>[o(U,null,{default:t(()=>[W,r("tbody",null,[(b(!0),h(D,null,z(e.filteredInventory,a=>(b(),h("tr",{key:a.inventory_id},[r("td",null,g(a.inventory_id),1),r("td",null,g(a.inventory_name),1),r("td",null,g(a.rack_id),1),r("td",null,[o(i,null,{default:t(()=>[o(d,{class:"ml-2",color:"primary",icon:"",size:"x-small",flat:"",onClick:N=>e.openUpdateDialog(a._id)},{default:t(()=>[o(k,null,{default:t(()=>[s("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),o(d,{class:"ml-2",color:"error",icon:"",size:"x-small",flat:"",onClick:N=>e.openDeleteDialog(a._id)},{default:t(()=>[o(k,null,{default:t(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1}),o(_,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[2]||(l[2]=a=>e.dialogVisible=a),"max-width":"400"},{default:t(()=>[o(f,null,{default:t(()=>[o(v),o(j,{class:"text-h5"},{default:t(()=>[s("Confirmar Eliminación")]),_:1}),o(p,null,{default:t(()=>[s("¿Estás seguro de que deseas eliminar este inventario?")]),_:1}),o(y,null,{default:t(()=>[o(v),o(d,{color:"error",text:"",onClick:e.closeDeleteDialog},{default:t(()=>[s("Cancelar")]),_:1},8,["onClick"]),o(d,{color:"primary",text:"",onClick:e.confirmDeleteInventory},{default:t(()=>[s("Eliminar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r("div",H,[o(_,{modelValue:e.dialog,"onUpdate:modelValue":l[6]||(l[6]=a=>e.dialog=a),"max-width":"600"},{default:t(()=>[o(f,{"prepend-icon":"mdi-folder-outline",title:"Agregar Inventario"},{default:t(()=>[o(p,null,{default:t(()=>[o(m,{dense:""},{default:t(()=>[o(i,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(u,{label:"Inventario ID",required:"",modelValue:e.objectDto.inventory_id,"onUpdate:modelValue":l[3]||(l[3]=a=>e.objectDto.inventory_id=a)},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(u,{label:"Nombre Inventario",required:"",modelValue:e.objectDto.inventory_name,"onUpdate:modelValue":l[4]||(l[4]=a=>e.objectDto.inventory_name=a)},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(w,{items:e.rackIds,label:"Nombre Rack",modelValue:e.objectDto.rack_id,"onUpdate:modelValue":l[5]||(l[5]=a=>e.objectDto.rack_id=a),outlined:""},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1}),o(V),o(y,null,{default:t(()=>[o(v),o(d,{color:"error",text:"Cancelar",variant:"plain",onClick:e.closeCreateDialog},null,8,["onClick"]),o(d,{color:"primary",text:"Guardar Inventario",variant:"tonal",onClick:e.saveInventory},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",M,[o(_,{modelValue:e.dialogUpdateVisible,"onUpdate:modelValue":l[10]||(l[10]=a=>e.dialogUpdateVisible=a),"max-width":"600"},{default:t(()=>[o(f,{"prepend-icon":"mdi-folder-outline",title:"Actualizar Inventario"},{default:t(()=>[o(p,null,{default:t(()=>[o(m,{dense:""},{default:t(()=>[o(i,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(u,{label:"ID",required:"",modelValue:e.objectDto.inventory_id,"onUpdate:modelValue":l[7]||(l[7]=a=>e.objectDto.inventory_id=a)},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(u,{label:"Nombre Inventario",required:"",modelValue:e.objectDto.inventory_name,"onUpdate:modelValue":l[8]||(l[8]=a=>e.objectDto.inventory_name=a)},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",md:"4",sm:"6"},{default:t(()=>[o(u,{hint:"Rack",label:"Rack ID",modelValue:e.objectDto.rack_id,"onUpdate:modelValue":l[9]||(l[9]=a=>e.objectDto.rack_id=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(V),o(y,null,{default:t(()=>[o(d,{color:"error",text:"",onClick:e.closeUpdateDialog},{default:t(()=>[s("Cancelar")]),_:1},8,["onClick"]),o(d,{color:"primary",text:"",onClick:e.updateInventory},{default:t(()=>[s("Actualizar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o(E,{modelValue:e.errorAlertVisible,"onUpdate:modelValue":l[11]||(l[11]=a=>e.errorAlertVisible=a),dismissible:"",color:"red",border:"left",elevation:"2","colored-border":"",icon:"mdi-alert",timeout:"5000"},{default:t(()=>[s(" Oops! Ha ocurrido un problema. ")]),_:1},8,["modelValue"])],64)}const te=T(F,[["render",J]]);export{te as default};
